@using Okapia.Domain.SeachModels
@model List<Okapia.Domain.ViewModels.Category.CategoryMenuViewModel>

@{
  var province = Context.Request.Query["pn"].ToString();
  if (province == "")
  {
    province = "البرز";
  }
}

<div class="col-lg-3 hidden-md hidden-sm hidden-xs">
  <nav>
    <ul class="side-cat">
      @foreach (var category in Model)
      {
        <li onMouseOver="addCategoryMenuItemStyle('a-@category.CategoryId', '@category.Color')" onmouseout="removeCategoryMenuItemStyle('a-@category.CategoryId')">
          <a id="a-@category.CategoryId" href="@Url.Action("مراکز-خدماتی-و-فروشگاهی", "JobView", new JobViewSearchModel() {CategoryId = category.CategoryId})" data-toggle="collapse" data-target="#sub-menu-8">
            <i>
              <i class="icon @category.Icon"></i>
            </i>
            <span>@category.CategoryName</span>
            @if (category.IsNew)
            {
              <div class="new-item">جدید</div>
            }
          </a>

          @foreach (var child in category.CategoryChilds)
          {
            var searchModel = new JobViewSearchModel
            {
              CategoryId = child.CategoryId
            };
            <ul class="clearfix step2">
              <li mj-success="successMegaMenu" class="item2" mj-target="/Categories/getDescendents?id=31">
                <a itemprop="url" href="@Url.Action("مراکز-خدماتی-و-فروشگاهی", "JobView", new JobViewSearchModel() {CategoryId = category.CategoryId, Province = province})">
                  @child.CategoryName
                </a>
              </li>
            </ul>
          }

        </li>
      }
    </ul>
  </nav>
</div>

<script>
  function addCategoryMenuItemStyle(elementId, color) {
    document.getElementById(elementId).style.color = color;
    document.getElementById(elementId).style.borderBottom = `2px solid ${color}`;
  }

  function removeCategoryMenuItemStyle(elementId) {
    document.getElementById(elementId).style.color = '#3c3c3c';
    document.getElementById(elementId).style.borderBottom = '1px solid #dcdcdc';
  }
</script>