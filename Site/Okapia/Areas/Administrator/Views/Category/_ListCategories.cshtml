@using Microsoft.AspNetCore.Http.Extensions
@using Okapia.Domain.SeachModels
@model IEnumerable<Okapia.Domain.ViewModels.Category.CategoryViewModel>
@{
  var searchModel = ViewData["searchModel"] as CategorySearchModel;
}

<div class="row">
  <div class="col-md-12">
    <div class="panel panel-border panel-primary">
      <div class="panel-heading">
        <h2 class="panel-title">لیست گروه های مشاغل</h2>
      </div>
      <div class="panel-body">
        <table id="datatable" class="table table-striped table-bordered">
          <tbody>
            @foreach (var item in Model.Select((value, index) => new { index, value }))
            {
              <tr>
                <td>
                  @{
                    var index = item.index;
                    index += 1;
                  }
                  @index
                </td>
                <td>
                  <img src="~/CategoryPhotos/Thumbs/@item.value.Photo" with="100" height="100" />
                </td>
                <td>
                  @Html.DisplayFor(modelItem => item.value.CategoryName)
                </td>
                <td>
                  @Html.DisplayFor(modelItem => item.value.CategorySmallDescription)
                </td>
                <td>
                  @Html.DisplayFor(modelItem => item.value.CategoryParentName)
                </td>
                <td>
                  <a class="btn btn-sm btn-info" asp-area="Administrator" asp-controller="Category" asp-action="Edit" asp-route-id="@item.value.CategoryId" asp-route-redirectUrl="@Context.Request.GetDisplayUrl()">ویرایش</a> |
                  @*@Html.ActionLink("جزيیات", "Details", new {/* id=item.PrimaryKey */}) |*@
                  @*@Html.ActionLink("حذف", "Delete", new {/* id=item.PrimaryKey */})*@
                </td>
              </tr>
            }
          </tbody>
          <thead>
            <tr>
              <th>
                ردیف
              </th>
              <th>
                @Html.DisplayNameFor(model => model.Photo)
              </th>
              <th>
                @Html.DisplayNameFor(model => model.CategoryName)
              </th>
              <th>
                @Html.DisplayNameFor(model => model.CategorySmallDescription)
              </th>
              <th>
                @Html.DisplayNameFor(model => model.CategoryParentName)
              </th>
              <th>
                عملیات
              </th>

          </thead>
        </table>
      </div>
      <nav>
        <ul class="pagination">
          @for (var i = 0; i < searchModel.PageCount; i++)
          {
            var routingSearchModel = new CategorySearchModel
            {
              CategoryName = searchModel.CategoryName,
              CategoryParrentId = searchModel.CategoryParrentId,
              PageSize = 20,
              PageIndex = i
            };
            if (searchModel.PageIndex == i)
            {
              <li class="active">
                @Html.ActionLink((i + 1).ToString(), "Index", "Category", routingSearchModel)
              </li>
            }
            else
            {
              <li>
                @Html.ActionLink((i + 1).ToString(), "Index", "Category", routingSearchModel)
              </li>
            }
          }
        </ul>
      </nav>
    </div>
  </div>
</div>

<div id="custom-width-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="custom-width-modalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog" style="width:55%;">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title" id="custom-width-modalLabel">Modal Heading</h4>
      </div>
      <div class="modal-body">
        <h4>Text in a modal</h4>
        <p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula.</p>
        <hr>
        <h4>Overflowing text to show scroll behavior</h4>
        <p>Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default waves-effect" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success waves-effect waves-light">Save changes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->